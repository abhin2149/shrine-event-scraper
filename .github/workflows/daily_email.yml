# This is the name of the GitHub Action
name: Send Daily Event Email

# This controls when the action runs
on:
  schedule:
    # This is a CRON job.
    # '0 18 * * *' means 18:00 UTC, which is 10:00 AM PST.
    # Adjust '18' if you are in a different time zone.
    - cron: '0 18 * * *'

  # This line also lets you run it manually from the "Actions" tab
  workflow_dispatch:

# This defines the steps the server will take
jobs:
  build-and-send:
    # Use the latest version of Ubuntu (a Linux server)
    runs-on: ubuntu-latest

    steps:
      # 1. Check out your repository's code
      - name: Check out code
        uses: actions/checkout@v4

      # 2. Set up the Python language
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      # 3. Install the required libraries
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install requests python-dateutil sib-api-v3-sdk

      # 4. Run your Python script
      - name: Run Python Script
        env:
          # This securely passes your secret key to the script
          BREVO_API_KEY: ${{ secrets.BREVO_API_KEY }}
        run: python shrine_events.py
